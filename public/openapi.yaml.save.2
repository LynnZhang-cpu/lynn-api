# 看看目标文件是否是文本（可选）file ~/Desktop/lynn-api/openapi.yamlfile ~/Desktop/lynn-api/public/openapi.yaml# 备份cp ~/Desktop/lynn-api/public/openapi.yaml ~/Desktop/lynn-api/public/openapi.yaml.bak || true# 覆盖写入（从下一行的 cat 开始，到最后一行单独的 YAML 结束，一次性粘贴）cat > ~/Desktop/lynn-api/public/openapi.yaml <<'YAML'openapi: 3.1.0info:  title: 诊所智能语音助手 API  description: 使用 Whisper 将音频转文字，并将文本整理成 SOAP（Subjective/Objective/Assessment/Plan）结构化病历。  version: 1.0.0servers:  - url: https://lynn-api.onrender.com    description: Render 线上服务tags:  - name: meta    description: 健康检查与服务元数据  - name: audio    description: 音频处理相关接口（Whisper 转写、从音频生成 SOAP）  - name: tcm    description: 从文本生成 SOAP（中医诊疗工作流）paths:  /health:    get:      tags: [meta]      operationId: getHealth      summary: 健康检查      description: 检查服务是否正常运行。      responses:        '200':          description: 成功响应          content:            application/json:              schema:                type: string              examples:                okExample:                  value: "OK"  /meta:    get:      tags: [meta]      operationId: getMeta      summary: 获取服务元数据      description: 返回 API 的元信息（例如版本、说明等）。      responses:        '200':          description: 成功响应          content:            application/json:              schema:                type: string              examples:                metaExample:                  value: "诊所智能语音助手 API"  /transcribe:    post:      tags: [audio]      operationId: transcribe      summary: 使用 Whisper 进行音频转文字      description: 上传音频文件，返回 Whisper 模型转录的文本。      security:        - bearerAuth: []      requestBody:        required: true        content:          multipart/form-data:            schema:              type: object              required: [file]              properties:                file:                  type: string                  format: binary                  description: 要转录的音频文件（如 wav、mp3、m4a）      responses:        '200':          description: 成功返回转录文本          content:            application/json:              schema:                type: object                properties:                  transcription:                    type: string                    description: 转录结果文字              examples:                sample:                  value:                    transcription: "患者主诉近三日咽痛，伴轻微发热……"  /soap-from-audio:    post:      tags: [audio]      operationId: soapFromAudio      summary: 从音频生成 SOAP 结构      description: 上传诊疗录音，自动生成结构化 SOAP（主诉/客观/评估/计划）。      security:        - bearerAuth: []      requestBody:        required: true        content:          multipart/form-data:            schema:              type: object              required: [file]              properties:                file:                  type: string                  format: b# 看看目标文件是否是文本（可选）file ~/Desktop/lynn-api/openapi.yamlfile ~/Desktop/lynn-api/public/openapi.yaml# 备份cp ~/Desktop/lynn-api/public/openapi.yaml ~/Desktop/lynn-api/public/openapi.yaml.bak || true# 覆盖写入（从下一行的 cat 开始，到最后一行单独的 YAML 结束，一次性粘贴）cat > ~/Desktop/lynn-api/public/openapi.yaml <<'YAML'openapi: 3.1.0info:  title: 诊所智能语音助手 API  description: 使用 Whisper 将音频转文字，并将文本整理成 SOAP（Subjective/Objective/Assessment/Plan）结构化病历。  version: 1.0.0servers:  - url: https://lynn-api.onrender.com    description: Render 线上服务tags:  - name: meta    description: 健康检查与服务元数据  - name: audio    description: 音频处理相关接口（Whisper 转写、从音频生成 SOAP）  - name: tcm    description: 从文本生成 SOAP（中医诊疗工作流）paths:  /health:    get:      tags: [meta]      operationId: getHealth      summary: 健康检查      description: 检查服务是否正常运行。      responses:        '200':          description: 成功响应          content:            application/json:              schema:                type: string              examples:                okExample:                  value: "OK"  /meta:    get:      tags: [meta]      operationId: getMeta      summary: 获取服务元数据      description: 返回 API 的元信息（例如版本、说明等）。      responses:        '200':          description: 成功响应          content:            application/json:              schema:                type: string              examples:                metaExample:                  value: "诊所智能语音助手 API"  /transcribe:    post:      tags: [audio]      operationId: transcribe      summary: 使用 Whisper 进行音频转文字      description: 上传音频文件，返回 Whisper 模型转录的文本。      security:        - bearerAuth: []      requestBody:        required: true        content:          multipart/form-data:            schema:              type: object              required: [file]              properties:                file:                  type: string                  format: binary                  description: 要转录的音频文件（如 wav、mp3、m4a）      responses:        '200':          description: 成功返回转录文本          content:            application/json:              schema:                type: object                properties:                  transcription:                    type: string                    description: 转录结果文字              examples:                sample:                  value:                    transcription: "患者主诉近三日咽痛，伴轻微发热……"  /soap-from-audio:    post:      tags: [audio]      operationId: soapFromAudio      summary: 从音频生成 SOAP 结构      description: 上传诊疗录音，自动生成结构化 SOAP（主诉/客观/评估/计划）。      security:        - bearerAuth: []      requestBody:        required: true        content:          multipart/form-data:            schema:              type: object              required: [file]              properties:                file:                  type: string                  format: binary                  description: 医疗录音音频文件      responses:        '200':          description: 成功返回 SOAP 结构          content:            application/json:              schema:                type: object                properties:                  subjective:                    type: string                  objective:                    type: string                  assessment:                    type: string                  plan:                    type: string              examples:                sample:                  value:                    subjective: "咽痛三日，口干，微恶风。"                    objective: "体温37.8°C，咽部充血。"                    assessment: "风热犯表。"                    plan: "银翘散加减；针刺列缺、合谷。"  /soap:    post:      tags: [tcm]      operationId: soapFromText      summary: 从文本生成 SOAP 结构      description: 提交一段已转录文本，返回结构化的 SOAP 内容。      security:        - bearerAuth: []      requestBody:        required: true        content:          application/json:            schema:              type: object              required: [text]              properties:                text:                  type: string                  description: 已转录的诊疗对话文本      responses:        '200':          description: 成功返回 SOAP 结构          content:            application/json:              schema:                type: object                properties:                  subjective:                    type: string                  objective:                    type: string                  assessment:                    type: string                  plan:                    type: string              examples:                sample:                  value:                    subjective: "患者自诉咽痛三日，伴微发热。"                    objective: "舌红，苔薄黄。"                    assessment: "外感风热。"                    plan: "宣肺清热，处方：银翘散；配穴：合谷、曲池、外关。"components:  securitySchemes:    bearerAuth:      type: http      scheme: bearer      bearerFormat: JWTYAMLcd ~/Desktop/lynn-apigit add public/openapi.yamlgit commit -m "feat(openapi): add bearer auth + full spec"git push origin main@app.get("/health")def health():    return {"status": "ok"}@app.get("/health")def health():    return {"status": "ok"}cd ~/Desktop/lynn-apigit add app/main.pygit commit -m "fix: make /health return JSON for Render health check"git push origin maingit add/commit/pushgit add/commit/pushuvicorn app.main:app --host 0.0.0.0 --port $PORTcd ~/Desktop/lynn-apigit add app/main.pygit commit -m "feat: stable /health + bearer auth + endpoints skeleton"git push origin mainhttps://lynn-api.onrender.com/openapi.jsonPK     ! ߤlZ      [Content_Types].xml (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 n0EUb袪*>-R{VǼQUl"%33Vƃښl	w%=^i7+-d&0A6l4L60#ÒSOX *V$z33%p)O^5}nH"dsXgL`|ԟ|Prۃs?PWtt4Q+"wa|T\y,NU%-D/ܚXݞ(<E) ;NL?F˼܉<Fk	hyڜqi?ޯli 1]Hgm@m   PK     !    N   _rels/.rels (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 j0@ѽQN/c[ILj<]aGӓzsFu]U	^[x 1xpf#I)ʃY*Di")c$qU~31jH[{=E~f?3-޲]Tꓸ2j),l0/%bzŉ,		/|f\Z?6!Y_o]A   PK     ! dQ   1   word/_rels/document.xml.rels (                                                                                                                                                                                                                                                                 j0E}-;}PBlJ! E?,	`HI`rsπ6w{r茯{*xAkWk*`[^^ljNKD8R1d:4e>K/4Vm^urw2NP0ŮVw5jo7o:>S!?p8JX[d0KDEVKc2P,ũa].ﰘsYҡ+(!O>z   PK     ! z       word/document.xmln0	xQ89mCIh>}Z*d̈G^z{bׁQAdD~J|X,2\JAWCITX¤EV~aJ2kΈFn5Rg( j)-	5{bq- 8Cc/JhvCT|1jh6	4;[L#ECr)iA8aKELnBWcSW Vز+=3XE`x]LX".3ZYK+E_uNzZ7BmnCsi	LuΧ`h!6eA#i]a0D#5[%_xkΜ, -  ,-#i8ldjTGֱŜLf"J9[lqMH/5p'~#.ܩ>G{]0.`5	usb^q>Bj)AU'!Pܣjc5s5ƿFf'T07K	r/(X(|Wl5`4[Xs,=Кng3%YcW)(ax>>1\$qR[vVB%gz9nnf3߄eVJ{w6b,	ߩ?Ӓ	,2BfT;    PK     ! g        word/theme/theme1.xmlYKGza5Hk6޵Rkiڵ0`r	CB1cII3-ď]	U?4s:G[=Wqؘ$aǽ}0,\GHe	,܋;v8:n$|,F096	M.cAoL˵JQI\'A11vJwg|@_"QTcCBcӪP!qa1;>P$$Lt܊s;k!*dsrC[5-õ^֯TnAcX 4NS.f-(mZtz׷]_}Mo?so^7kPllᛕnkx(I[ߨݮ!F/[m6kKx*+OdQC h"IG.fxF%8$ f(a+ʰR(:QN:!#Nf^nŋ|Ǐ_>uey7?}/͓oxǿ_Ag?{rt:>vn6hY 8KtP)z #}}(zش4gޏ\Z=hq랮V'}q>n!td[;`>'6A7)8QslE.!]Ȉ3&ҹK"VC#2$,l߆m8=FmD@ԦSÌ\4E2_ap!!6|aнi=M$djC">gV$+b!LZI0>%Cېfv$03N)H]NћFhbL1cܾbóaelUdƪ'X@c0Bvb#,P#^\u5^hjRա!bcZoF+x]pr@ζ9@X U-݂LD'-6MCQ$ykQO-өwT:Ed)mV5c5}4OnbG,г欦4E9d*GdE?Z=Z§>B\P+t#쏇0;ZhiAs9m3~fLUP83&pVj=6NGsM@2k5eLGZA늀}Luj-$NE¢_K HRFncT~St1m,k+iD.L0>e_3)i4[*l=\5#4xTIɥ?$̸}$DbPC@[T{Dɵ+Wx2#Y0ua.Ub=!XuHGc-Ue1rm1άGxߒQDgZ(du{M'tsWfP9ķۅD.i\ ִ珏wXey`\^庢[BZAM1PFMjX[fqڷfԪbUW֋mvx"J¯+4Uv/9'AzAJ?(yuRjzVC0⪟=t|oǷǫR܈ew<hԆz(aZv>t#kZF5J^ڥWuf5Wռv   PK     ! `s  q     word/settings.xmlVn8}_`*dKI:&E.LIE8R6"i3sf8<GFG;,|g7¼%ۙ~_x#/ϼV{O(JY1jt<VERgJH4|!6~!X4	%0 z1ZӞgBJTT)pEȗBhfKLUMϲX;ݏ6cY#^R	h(Rp@	OsA~N+_G=#H:c<|Or!Cc9!P.WDc4:0l葢/QMݑ\"^2Ho\HS(3_hgM+OB>m,Ͻ@4@Sj'NA1t+Y,6jGyEN;;.j$QT Bp-u~(掄kG)dV:V Y7ခ#[jjmDM$/?#`	M$`"KR{L(^f2*Mή_G`n2Hж7JfOfMI!RyKʛ%#U%$ ȉH}g{õZCSC$ǧrTnY}t8]=A&jߥoY|rﳲ<I2.bX.	mc96|&9OtMt-%QWvM7HnC~sÑ),m:t/QIҹiI#Ug.=Z^~Iۧ=T۫}T/9\+fS/>234m8(:4aJe?mcŢ0~1"g;8dMm:bg[l0R$к[{%({\3{	",YQ5h!iZ<WΞDq0_~5R1wL2O¿/<Y.W<ſp   PK     ! bs     docProps/core.xml (                                                                                                                                                                                                                                                                 QO0MXfO[bfo4m7ƿ`{ޞ.Mg"(AHVr!S1򌥒Ӽ0E54noRVjxѥm9I05E;kUa;(	!)uAk+t8"`)W#:[r6X[0PA/],\E{qOF`UUA5iQ?W}!,,搥R>xh\4P[lυQm^h"C]7>0-uٙScf7c;fDQ4/#Zbhsn=O҅+e}a"q%FCر7?   PK     ! O       word/fontTable.xmlKn0zXWA@"")J"*I[z^'萒]rѨ.ڀp> `ϴJ.Q4(`|><m(0ȔJ%:2nV_]׋LIkȗf!V04`` nu?+DE,cc<E-FSvN0i}~Y	D%M+s/JV=	{ VFevʹyG_`2 SBfaϊ Ljb%>\bIAL%aEMθp	xKɶ ^\dЪz!5)VsTEۓr`K8qG 0iFΈ񤚚*niqDsWu2<l=16(TAZ%v796j8ska@ω{&Ho)#|~mRN/4^rdҭ#똔כzsI7&xIO\0<:xDUߐI`t~|Ac=w8Czc3Ox^_O?BҾvti/;    PK     ! 4h       word/webSettings.xmln ',;nEVJQi4M[ c4X@O-wc|?:<<ζB`I2{}yn%ha㇇	!NʈkC<;ؠ3<ԭsݯMw#t<ZiyY3vĸPi'6$@oUO=13\3fzw2J8؄	s(>-Rdp?P^fv##'琣8Qrd /lGQӹooD7񌌨-:^k"ѭgtqY/.jcWiqwiCr\S<_	'8?ԺݵS"+b.K}ht\1ڏoz8gGFnXk~)t1e<[9=75߿}>7    PK     ! Si  r     word/styles.xml[W8>y}Ýns30~VlhpO$e9.nrd/|/2zy!Tv2=xDdO'Ǉ˭(Y02~2x/E.yi@V`Zᰈ<e5pe4LY<m*Rpw{pPc.5P<Yi9b*fłڅdTVlTĹ*Ԥ7EmW*W` cc|CrD.9"q8aq ER&Sew1CJ6e%r\ԌQ_?e*gcIZHYWofߵ6ea^y~eTYYDǬxԭB7xub?(O/Sȸ(D"ChɓsӉ$˞lyk'oNM޶ggWշ>6S>Q3OFdmo>^B:G}T\$l*sʳǂ'>߈<Zd\|f4cfL4ߞU6N=fMSLv>"lQ]Q8[̜v-TC{g5tY~VCGjb,Y~68799/99'9x1㙦Nb,t&gs7#¸w	a{0ݜøywsnNxnԊͲ&J*yT4i'ixfs$T̾<CI)"5&iwy¥%s^sψOxγSNl:y:&3DYB<|"IRXNh6/$`R,U)FnD$:KɉXw4S̲ӿ4/ͨTM#F4nF4n5hjZq{)]ut?vw.9л#1 迻F,gO9M#sn33G%j]oȹj\K<"-y-vfvESόѴɴ#&ՂXp)X|gFN̷eXm1+vFR&_x˲ޤK%z	qT檚kw$,ΦVZCt/n٬K&2.R&dDz̔f`hg,UJƬ'މ𐅝LER	I/3E&H+'4W딜8bZtxKWVCos\T$0a1SݝH>/GԵt˄5\%US%5\]QmdE!PyTQoo)\H6 *9Or-p-z{	"!¨0*,J#:e::h	,gF5,jY<D/v1j9HMVtr!/$bH+}&>Uq 1jIخpT"ce2)":k6{.zw^OLx&G3ׇN=oӴF~s1rQmniw[ny"颣fývF/yi	^$":F67GVkG#a_;FZE˟'QYxw6ͶMed<jEkVN؜-t?y);)}GO"̞4m{˫'@޷N󏹪ۯp~S׵^8e9{O\e8vN7~DGtN@~DLG$?sn#:')?`<.[l)!٪*#FQ{QAxQ!mT@"F0Qa<Ψ0>ĨbTHA"FQ!mT@5pm2*hBڨvè0gTbTH	1*hBڨ6*D( Bڨ6*DZjnT3*1*RFQ!mT@"FQAxQ!mT@"F'{C)!FQ!mT@"FQ!eTdTHA"FY]f?bSrE")5xgn1BCԞ.^:y>.C{!9S 	My7ym3ݍF~[ҵ\\wG -8;l!nN nNAd胎tڦC8ڦ%j1'tUO*ӋG¤6JnT?+5$I0RCT&5LX!+uxrp!*XjʰRCVjHJsńKQRCTpqRCVjH`¥`!*LjP%Ԑp!*XjjEY[9KN`@DVK!ZZ-4UKh~BW2	(=~Za?*Lj\$uQԸj+5ZjW-JR㪥&qROW-JZUK~qRԸjIj\$u.5ZjW-UKMR㪥&qRԸj+5ZjW-JR㪥&qRԸjIj\W-JZUK:D<jwŊi?1yO"MAmu~<ݹ]) [T`ӓmtmբMSV\?TMT	<vd5߮t5^Fߥ-}h3~en,рª&oBϹ*>ٶ,z7>iwzYgxEm/f;ҫ-*   PK     ! !Yk     docProps/app.xml (                                                                                                                                                                                                                                                                 RMO0#޷t&4yAhqcm#$J{J~yvW)vv].UYNiۮvvY1	qcy`ǐ4Ƃ$l\]J~X")m)ӸЋD05xGEU-'̏堸:*'R=qF$䏹̕K=%aj#lE/bt"h h)?h\tM*NflZ4>tRS! WAADN0y#LD`l\%96F}n>[~_uv^˟<EEG#wdu-߉Wr^9닣?    PK-      ! ߤlZ                      [Content_Types].xmlPK-      !    N                 _rels/.relsPK-      ! dQ   1                 word/_rels/document.xml.relsPK-      ! z                   word/document.xmlPK-      ! g                    word/theme/theme1.xmlPK-      ! `s  q                 word/settings.xmlPK-      ! bs                   docProps/core.xmlPK-      ! O                   word/fontTable.xmlPK-      ! 4h                 .  word/webSettings.xmlPK-      ! Si  r               $  word/styles.xmlPK-      ! !Yk                 )  docProps/app.xmlPK        [,    